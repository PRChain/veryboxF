"use strict";(self.webpackChunkverybox_tools=self.webpackChunkverybox_tools||[]).push([[786],{62446:function(e,t,n){n.d(t,{Z:function(){return d}});n(47313);var r=n(9381),s=n(24240),i=n(80504),a=n(36368),o=n(59017),l=n(46417);function d(){const{t:e}=(0,s.$)(),t=(0,r.v9)((e=>e.blockchain)),n=(0,r.I0)();return(0,l.jsx)(a.Z,{fullWidth:!0,title:e("gasLimit.title"),id:"gasLimit",sx:{mb:0,mt:0,width:"20ch"},label:e("gasLimit.label"),variant:"outlined",size:"small",type:"number",value:t.gasLimit,onChange:e=>{n((0,i.OQ)({gasLimit:parseInt(e.target.value)}))},InputProps:{endAdornment:(0,l.jsx)(o.Z,{position:"end",children:"Gwei"})}})}},65420:function(e,t,n){n.d(t,{a:function(){return i}});var r=n(25091),s=n(83582);async function i(e,t){const n=r.IB[Storage.get("networkNow")].CHAIN,i={apiKey:r.sk[n].KEY,network:s.N[r.sk[n].CHAIN],maxRetries:10},a=new s.c(i),o=await a.nft.getNftsForOwner(t);let l=[];for(const r of o.ownedNfts)r.contract.address.toLowerCase()==e.toLowerCase()&&l.push(r.tokenId);return l}},84786:function(e,t,n){n.r(t);var r=n(47313),s=n(24240),i=n(9381),a=n(82937),o=n(36368),l=n(605),d=n(68737),c=n(25319),m=n(17201),u=n(62446),h=n(71247),p=n(35540),x=n(25091),g=n(97319),v=n(65420),f=n(33497),Z=n(83838),P=n(32703),j=n(46417);const y=n(15372);let b={addrStr:"",pkStr:"",pkArr:[],addrArr:[]};t.default=function(){const e=(0,i.v9)((e=>e.blockchain)),{t:t}=(0,s.$)(),{CHAIN:n,CHAINID:w}=x.IB[g.Z.get("networkNow")],[N,A]=(0,r.useState)(x.IB[g.Z.get("networkNow")].RPC),[I,k]=(0,r.useState)(new y(new y.providers.HttpProvider(N))),[T,S]=(0,r.useState)(""),[F,C]=(0,r.useState)(1),[L,E]=(0,r.useState)(2),[O,M]=(0,r.useState)(""),[z,H]=(0,r.useState)({addrStr:"",pkStr:"",pkArr:[],addrArr:[]}),[_,K]=(0,r.useState)(0),[R,$]=(0,r.useState)(0),[G,W]=(0,r.useState)({isOpen:!1,msg:"",nonce:""}),[D,B]=(0,r.useState)(""),U={inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},[q,Q]=(0,r.useState)(!1),[V,Y]=(0,r.useState)({type:"",msg:null}),[J,X]=(0,r.useState)(!1);async function ee(t,r,s,i,a,o){const{_sendTx:l}=(0,h.n)(I,n),d=ne(U,[r,O,s]),c=await l({from:r,to:T,value:0,gasLimit:e.gasLimit,maxPriorityFeePerGas:F,maxFeePerGas:L,data:d,nonce:a,pk:t}),m=c.error?c.error:"\u2713"+c.transactionHash;c.error&&c.error;W({isOpen:!0,msg:m,nonce:parseInt(1e4*Math.random())}),ie((e=>[...e,{id:e.length>0?e.length+1:1,fromAddress:r,toAddress:O,tokenId:s,status:m}]))}const te=async(e,t,n)=>await(0,v.a)(t,n),ne=(e,t)=>I.eth.abi.encodeFunctionCall(e,t);async function re(e){let{from:t,to:n,gas:r,value:s,abi:i,parameters:a}=e;const o=ne(i,a);return await I.eth.estimateGas({to:n,from:"0x0000000000000000000000000000000000000000",data:o}).then((e=>e)).catch((function(e){return e.message.indexOf("insufficient funds for gas * price + value")>0?{error:"INSUFFICIENT_FUNDS"}:{error:e.message}}))}const[se,ie]=(0,r.useState)([]),ae=[{field:"id",headerName:"ID",hide:!1,headerAlign:"center"},{field:"fromAddress",headerName:t("collectNFT.fromAddress"),width:160},{field:"toAddress",headerName:t("collectNFT.toAddress"),width:160},{field:"tokenId",headerName:t("collectNFT.tokenId"),width:80},{field:"status",headerName:t("collectNFT.status"),width:200}],[oe,le]=(0,r.useState)({}),de=(e,t)=>{le((n=>({...n,[e]:t})))},ce=()=>{if(!me())return W({isOpen:!0,msg:"Invalid gasLimit",nonce:parseInt(1e4*Math.random())}),!1;const e=ue(T);if(de("contractAddress",!e),!e)return W({isOpen:!0,msg:"Contract Address not valid",nonce:parseInt(1e4*Math.random())}),!1;const t=ue(O);if(de("collectionTo",!t),!t)return W({isOpen:!0,msg:"Collection To Address not valid",nonce:parseInt(1e4*Math.random())}),!1;const n=he();return de("privateKey",!n),n?!!(e&&n&&t):(W({isOpen:!0,msg:"Private Key required",nonce:parseInt(1e4*Math.random())}),!1)},me=()=>Number.isInteger(e.gasLimit)&&e.gasLimit>0,ue=e=>""!=e&&I.utils.isAddress(e),he=()=>z.pkArr.length>0;return(0,j.jsx)(f.Z,{title:t("collectNFT.title"),children:(0,j.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsx)(a.ZP,{container:!0,spacing:2,children:(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsx)(a.ZP,{container:!0,spacing:2,children:(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsx)(p.Z,{action:{changeRPCAction:e=>{e.available&&k(new y(new y.providers.HttpProvider(e.rpc)))}},data:{rpc:N}})})})})})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,j.jsx)(a.ZP,{item:!0,xs:9,sm:6,children:(0,j.jsx)(o.Z,{error:oe.contractAddress,fullWidth:!0,id:"contract_address",label:t("collectNFT.contractAddress"),variant:"outlined",size:"small",value:T,onChange:e=>{S(e.target.value)}})}),(0,j.jsx)(a.ZP,{item:!0,xs:1,children:(0,j.jsx)(l.Z,{variant:"text",onClick:e=>{S("")},children:t("collectNFT.contractAddressClear")})})]})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,j.jsx)(a.ZP,{item:!0,xs:12,sm:2,children:(0,j.jsx)(u.Z,{})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,sm:3,children:(0,j.jsx)(o.Z,{fullWidth:!0,id:"maxpriorityfeepergas",label:t("collectNFT.maxpriorityfeepergas"),variant:"outlined",size:"small",type:"number",value:F,onChange:e=>{C(e.target.value)}})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,sm:3,children:(0,j.jsx)(o.Z,{fullWidth:!0,id:"maxfeepergas",label:t("collectNFT.maxFee"),variant:"outlined",size:"small",type:"number",value:L,onChange:e=>{E(e.target.value)}})})]})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,j.jsx)(a.ZP,{item:!0,xs:9,sm:6,children:(0,j.jsx)(o.Z,{error:oe.collectionTo,fullWidth:!0,id:"mint_method",label:t("collectNFT.collectionTo"),variant:"outlined",size:"small",value:O,onChange:e=>{M(e.target.value)}})}),(0,j.jsx)(a.ZP,{item:!0,xs:1,children:(0,j.jsx)(l.Z,{variant:"text",onClick:e=>{M("")},children:t("collectNFT.collectionToClear")})})]})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsx)(c.Z,{canImportFromVbWallet:!0,setPk:e=>{H(e),b=e},provider:I,chain:n,title:t("collectNFT.importPrivateKeyTitle"),error:oe.privateKey,storageKey:"mintPk"})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,style:{display:G.isOpen?" ":"none"},children:(0,j.jsx)(m.Z,{msg:G.msg,nonce:G.nonce})},G.msg),(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsx)(a.ZP,{container:!0,spacing:2,children:(0,j.jsx)(a.ZP,{item:!0,xs:1,children:(0,j.jsx)(P.Z,{onClick:()=>{ce()&&(()=>{const t={contractAddress:T,collectionTo:O,maxPriorityFeePerGas:F,maxFeePerGas:L,addressess:b.addrArr,gasLimit:e.gasLimit};Y({type:"_collectNFT",msg:t}),Q(!0)})()},loading:J,variant:"contained",children:(0,j.jsx)("span",{children:t("collectNFT.execute")})})})})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,style:{height:600,textAlign:"center",width:"100%"},children:(0,j.jsx)(d._,{rows:se,columns:ae})}),(0,j.jsx)(a.ZP,{item:!0,xs:12,style:{height:30,width:"100%",textAlign:"center",display:"none"},children:"No Data"}),V.msg&&(0,j.jsx)(a.ZP,{item:!0,xs:12,children:(0,j.jsx)(Z.U,{isOpen:q,msg:V.msg,okAction:()=>{if(ce()){X(!0),ie([]);for(let e=0;e<z.pkArr.length;e++)setTimeout((async()=>{const t=e,n=z.addrArr[t];let r=await I.eth.getTransactionCount(n);const s=await te(I,T,n);if($(s.length),s.length>0)for(let i=0;i<s.length;i++){const a=s[i],o=await re({from:n,to:T,gas:x.Lw,value:0,abi:U,parameters:[n,T,a]});if(o.error)return;"number"==typeof o&&o<x.Lw&&(ee(z.pkArr[t],n,a,i,r,0),r++),i==s.length-1&&e==z.pkArr.length-1&&X(!1)}0==s.length&&e==z.pkArr.length-1&&(W({isOpen:!0,msg:"No NFTs found",nonce:parseInt(1e4*Math.random())}),X(!1))}),1e3)}},closeDialog:()=>{Q(!1)},type:V.type})})]})})}},59017:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(63366),s=n(87462),i=n(47313),a=n(83061),o=n(21921),l=n(28170),d=n(42669),c=n(10829),m=n(11736),u=n(42379),h=n(77430),p=n(32298);function x(e){return(0,p.Z)("MuiInputAdornment",e)}var g,v=(0,h.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),f=n(53010),Z=n(46417);const P=["children","className","component","disablePointerEvents","disableTypography","position","variant"],j=(0,u.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,l.Z)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,s.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{[`&.${v.positionStart}&:not(.${v.hiddenLabel})`]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})}));var y=i.forwardRef((function(e,t){const n=(0,f.Z)({props:e,name:"MuiInputAdornment"}),{children:u,className:h,component:p="div",disablePointerEvents:v=!1,disableTypography:y=!1,position:b,variant:w}=n,N=(0,r.Z)(n,P),A=(0,m.Z)()||{};let I=w;w&&A.variant,A&&!I&&(I=A.variant);const k=(0,s.Z)({},n,{hiddenLabel:A.hiddenLabel,size:A.size,disablePointerEvents:v,position:b,variant:I}),T=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:s,size:i,variant:a}=e,d={root:["root",n&&"disablePointerEvents",s&&`position${(0,l.Z)(s)}`,a,r&&"hiddenLabel",i&&`size${(0,l.Z)(i)}`]};return(0,o.Z)(d,x,t)})(k);return(0,Z.jsx)(c.Z.Provider,{value:null,children:(0,Z.jsx)(j,(0,s.Z)({as:p,ownerState:k,className:(0,a.Z)(T.root,h),ref:t},N,{children:"string"!==typeof u||y?(0,Z.jsxs)(i.Fragment,{children:["start"===b?g||(g=(0,Z.jsx)("span",{className:"notranslate",children:"\u200b"})):null,u]}):(0,Z.jsx)(d.Z,{color:"text.secondary",children:u})}))})}))}}]);