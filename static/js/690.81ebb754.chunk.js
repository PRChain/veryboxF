"use strict";(self.webpackChunkverybox_tools=self.webpackChunkverybox_tools||[]).push([[690],{65420:function(e,t,n){n.d(t,{a:function(){return a}});var s=n(25091),r=n(83582);async function a(e,t){const n=s.IB[Storage.get("networkNow")].CHAIN,a={apiKey:s.sk[n].KEY,network:r.N[s.sk[n].CHAIN],maxRetries:10},i=new r.c(a),o=await i.nft.getNftsForOwner(t);let c=[];for(const s of o.ownedNfts)s.contract.address.toLowerCase()==e.toLowerCase()&&c.push(s.tokenId);return c}},690:function(e,t,n){n.r(t);var s=n(47313),r=n(24240),a=n(82937),i=n(36368),o=n(605),c=n(68737),l=n(25319),d=n(17201),u=n(71247),m=n(35540),h=n(25091),x=n(65420),p=n(33497),g=n(83838),f=n(32703),y=n(46417);const j=n(15372);t.default=function(){const{t:e}=(0,r.$)(),{CHAIN:t,CHAINID:n}=h.IB[Storage.get("networkNow")],[P,v]=(0,s.useState)(h.IB[Storage.get("networkNow")].RPC),[Z,w]=(0,s.useState)(new j(new j.providers.HttpProvider(P))),[A,N]=(0,s.useState)(""),[T,k]=(0,s.useState)(1),[F,C]=(0,s.useState)(2),[S,I]=(0,s.useState)(""),[b,K]=(0,s.useState)({addrStr:"",pkStr:"",pkArr:[],addrArr:[]}),[O,_]=(0,s.useState)(0),[H,D]=(0,s.useState)(0),[L,M]=(0,s.useState)({isOpen:!1,msg:"",nonce:""}),[G,z]=(0,s.useState)(""),W={inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},[B,R]=(0,s.useState)(!1),[U,E]=(0,s.useState)({type:"",msg:null}),[q,Y]=(0,s.useState)(!1);async function $(e,n,s,r,a,i){const{_sendTx:o}=(0,u.n)(Z,t),c=Q(W,[n,S,s]),l=await o({from:Z.eth.accounts.privateKeyToAccount(e).address,to:A,value:0,gasLimit:h.Lw,maxPriorityFeePerGas:T,maxFeePerGas:F,data:c,nonce:a,pk:e}),d=l.error?l.error:l.transactionHash;l.error&&l.error;M({isOpen:!0,msg:d,nonce:parseInt(1e4*Math.random())}),ee((e=>[...e,{id:e.length>0?e.length+1:1,fromAddress:n,toAddress:S,tokenId:s,status:d}]))}const J=async(e,t,n)=>await(0,x.a)(t,n),Q=(e,t)=>Z.eth.abi.encodeFunctionCall(e,t);async function V(e){let{from:t,to:n,gas:s,value:r,abi:a,parameters:i}=e;const o=Q(a,i);return await Z.eth.estimateGas({to:n,from:"0x0000000000000000000000000000000000000000",data:o}).then((e=>e)).catch((function(e){return e.message.indexOf("insufficient funds for gas * price + value")>0?{error:"INSUFFICIENT_FUNDS"}:{error:e.message}}))}const[X,ee]=(0,s.useState)([]),te=[{field:"id",headerName:"ID",hide:!1,headerAlign:"center"},{field:"fromAddress",headerName:e("collectNFT.fromAddress"),width:160},{field:"toAddress",headerName:e("collectNFT.toAddress"),width:160},{field:"tokenId",headerName:e("collectNFT.tokenId"),width:80},{field:"status",headerName:e("collectNFT.status"),width:200}],[ne,se]=(0,s.useState)({}),re=(e,t)=>{se((n=>({...n,[e]:t})))},ae=()=>{const e=ie(A);if(re("contractAddress",!e),!e)return M({isOpen:!0,msg:"Contract Address not valid",nonce:parseInt(1e4*Math.random())}),!1;const t=ie(S);if(re("collectionTo",!t),!t)return M({isOpen:!0,msg:"Collection To Address not valid",nonce:parseInt(1e4*Math.random())}),!1;const n=oe();return re("privateKey",!n),n?!!(e&&n&&t):(M({isOpen:!0,msg:"Private Key required",nonce:parseInt(1e4*Math.random())}),!1)},ie=e=>""!=e&&Z.utils.isAddress(e),oe=()=>b.pkArr.length>0;return(0,y.jsx)(p.Z,{title:"Distribute NFT",children:(0,y.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(a.ZP,{container:!0,spacing:2,children:(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(a.ZP,{container:!0,spacing:2,children:(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(m.Z,{action:{changeRPCAction:e=>{e.available&&w(new j(new j.providers.HttpProvider(e.rpc)))}},data:{rpc:P}})})})})})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(a.ZP,{item:!0,xs:9,sm:6,children:(0,y.jsx)(i.Z,{error:ne.contractAddress,fullWidth:!0,id:"contract_address",label:e("collectNFT.contractAddress"),variant:"outlined",size:"small",value:A,onChange:e=>{N(e.target.value)}})}),(0,y.jsx)(a.ZP,{item:!0,xs:1,children:(0,y.jsx)(o.Z,{variant:"text",onClick:e=>{N("")},children:e("collectNFT.contractAddressClear")})})]})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(a.ZP,{item:!0,xs:12,sm:3,children:(0,y.jsx)(i.Z,{fullWidth:!0,id:"maxpriorityfeepergas",label:e("collectNFT.maxpriorityfeepergas"),variant:"outlined",size:"small",type:"number",value:T,onChange:e=>{k(e.target.value)}})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,sm:3,children:(0,y.jsx)(i.Z,{fullWidth:!0,id:"maxfeepergas",label:e("collectNFT.maxFee"),variant:"outlined",size:"small",type:"number",value:F,onChange:e=>{C(e.target.value)}})})]})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(a.ZP,{item:!0,xs:9,sm:6,children:(0,y.jsx)(i.Z,{error:ne.collectionTo,fullWidth:!0,id:"mint_method",label:e("collectNFT.collectionTo"),variant:"outlined",size:"small",value:S,onChange:e=>{I(e.target.value)}})}),(0,y.jsx)(a.ZP,{item:!0,xs:1,children:(0,y.jsx)(o.Z,{variant:"text",onClick:e=>{I("")},children:e("collectNFT.collectionToClear")})})]})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(l.Z,{setPk:e=>{K(e)},provider:Z,chain:t,title:e("collectNFT.importPrivateKeyTitle"),error:ne.privateKey,storageKey:"mintPk"})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,style:{display:L.isOpen?" ":"none"},children:(0,y.jsx)(d.Z,{msg:L.msg,nonce:L.nonce})},L.msg),(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(a.ZP,{container:!0,spacing:2,children:(0,y.jsx)(a.ZP,{item:!0,xs:1,children:(0,y.jsx)(f.Z,{onClick:()=>{ae()&&(()=>{const e={contractAddress:A,collectionTo:S,maxPriorityFeePerGas:T,maxFeePerGas:F,addressess:b.pkArr.map((e=>Z.eth.accounts.privateKeyToAccount(e).address))};E({type:"_collectNFT",msg:e}),R(!0)})()},loading:q,variant:"contained",children:(0,y.jsx)("span",{children:e("collectNFT.execute")})})})})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,style:{height:600,textAlign:"center",width:"100%"},children:(0,y.jsx)(c._,{rows:X,columns:te})}),(0,y.jsx)(a.ZP,{item:!0,xs:12,style:{height:30,width:"100%",textAlign:"center",display:"none"},children:"No Data"}),U.msg&&(0,y.jsx)(a.ZP,{item:!0,xs:12,children:(0,y.jsx)(g.U,{isOpen:B,msg:U.msg,okAction:()=>{if(ae()){Y(!0),ee([]);for(let e=0;e<b.pkArr.length;e++)setTimeout((async()=>{const t=e,n=Z.eth.accounts.privateKeyToAccount(b.pkArr[t]).address;let s=await Z.eth.getTransactionCount(n);const r=await J(Z,A,n);if(D(r.length),r.length>0)for(let a=0;a<r.length;a++){const i=r[a],o=await V({from:n,to:A,gas:h.Lw,value:0,abi:W,parameters:[n,A,i]});if(o.error)return;"number"==typeof o&&o<h.Lw&&($(b.pkArr[t],n,i,a,s,0),s++),a==r.length-1&&e==b.pkArr.length-1&&Y(!1)}0==r.length&&e==b.pkArr.length-1&&(M({isOpen:!0,msg:"No NFTs found",nonce:parseInt(1e4*Math.random())}),Y(!1))}),1e3)}},closeDialog:()=>{R(!1)},type:U.type})})]})})}}}]);