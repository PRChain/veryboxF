"use strict";(self.webpackChunkverybox_tools=self.webpackChunkverybox_tools||[]).push([[575],{17201:function(e,n,t){t.d(n,{Z:function(){return u}});var s=t(47313),o=t(82315),a=t(18104),i=t(11198),c=t(69791),r=t(62111),l=t(46417);function d(e){return(0,l.jsx)(c.Z,{...e,direction:"right"})}function u(e){const n=(0,r.Z)(),[t,c]=s.useState([]),[u,x]=s.useState(!1),[g,m]=s.useState(void 0),[h,Z]=s.useState(void 0);s.useEffect((()=>{Z((()=>d)),t.length&&!g?(m({...t[0]}),c((e=>e.slice(1))),x(!0)):t.length&&g&&u&&x(!1)}),[t,g,u]);const p=(e,n)=>{"clickaway"!==n&&x(!1)};return s.useEffect((()=>{c((n=>[...n,{message:e.msg,key:(new Date).getTime()}]))}),[e.nonce]),(0,l.jsx)("div",{style:{background:n.palette.secondary.main},children:(0,l.jsx)(o.Z,{open:u,autoHideDuration:4e3,onClose:p,TransitionComponent:h,TransitionProps:{onExited:()=>{m(void 0)}},message:g?g.message:void 0,action:(0,l.jsx)(s.Fragment,{children:(0,l.jsx)(a.Z,{"aria-label":"close",color:"inherit",sx:{p:.5},onClick:p,children:(0,l.jsx)(i.Z,{})})})},g?g.key:void 0)})}},85575:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var s=t(33497),o=t(47313),a=t(9381),i=t(24240),c=t(97890),r=t(80504),l=t(62111),d=t(25091),u=t(97319),x=t(16157),g=t(82441),m=t(95895),h=t(98368),Z=t(24609),p=t(605),f=t(42669),j=t(32703),b=t(17201),y=t(46417);const k=t(31881).default,v=[{label:"Connect wallet",description:"Connect a metamask wallet for signing in verybox.xyz site."},{label:"Sign in",description:'\n              Sign content: \n              "\n              Wellcomt to verybox.xyz \n,\n              Address: Your address ,\n              Nonce: Your nonce .\n              "\n              '}];function C(){const e=(0,a.I0)(),n=(0,a.v9)((e=>e.blockchain)),{t:t,i18n:s}=((0,l.Z)(),(0,i.$)());let C=(0,c.s0)();const[S,w]=(0,o.useState)([t("user.connect"),t("user.signIn")]),[O,T]=(0,o.useState)(0),[I,$]=(0,o.useState)(!1),[_,z]=(0,o.useState)({isOpen:!1,msg:"",nonce:""});const A=async()=>{if(0==O){$(!0);(await e((0,r.$j)())).error||T((e=>e+1)),$(!1)}},E=async n=>{e((0,r.zP)())};return(0,o.useEffect)((async()=>{n.account&&T(1)}),[]),(0,y.jsxs)(x.Z,{sx:{maxWidth:400},children:[(0,y.jsxs)(g.Z,{activeStep:O,orientation:"vertical",children:[(0,y.jsxs)(m.Z,{children:[(0,y.jsx)(h.Z,{optional:null,children:v[0].label}),(0,y.jsxs)(Z.Z,{children:[(0,y.jsx)(f.Z,{children:v[0].description}),(0,y.jsx)(x.Z,{sx:{mb:1},children:(0,y.jsxs)("div",{children:[(0,y.jsx)(j.Z,{variant:"contained",onClick:()=>{n.account?E():A()},loading:I,sx:{mt:1,mr:1},children:(0,y.jsx)("span",{children:n.account?t("user.disConnect"):t("user.connect")})}),n.account&&(0,y.jsx)(p.Z,{disabled:!1,onClick:()=>{T((e=>e+1))},sx:{mt:1,mr:1,color:"#999"},children:"next"})]})})]})]},v[0].label),(0,y.jsxs)(m.Z,{children:[(0,y.jsx)(h.Z,{optional:null,children:v[1].label}),(0,y.jsxs)(Z.Z,{children:[(0,y.jsx)(f.Z,{children:v[1].description}),(0,y.jsx)(x.Z,{sx:{mb:2},children:(0,y.jsxs)("div",{children:[(0,y.jsx)(j.Z,{variant:"contained",onClick:async t=>{if(u.Z.get("isLogin")){$(!0);let e={address:n.account.slice(2),s:u.Z.get("token")};k.post(`${d._T}web3loginout`,e,{timeout:1e4}).then((e=>{1==e.data.statu&&e.data.message.indexOf("success")>0&&(e.data.result?(u.Z.set("token",null),u.Z.set("tokenTime",null),u.Z.set("role",null),u.Z.set("isLogin",null),z({isOpen:!0,msg:"Sign out successful",nonce:parseInt(1e4*Math.random())})):alert(e.data.message)),$(!1)})).catch((e=>{$(!1),alert("Connection problem!")}))}else try{$(!0);const t=await(async()=>{let e={username:n.account.slice(2)};return await k.post(`${d._T}checkUser`,e).then((e=>e.data.result))})(),s=await e((0,r.uS)("Wellcomt to verybox.xyz,\nAddress: "+n.account+",\nNonce: "+t+"."));let o={address:n.account.slice(2),sn:s.result.slice(2)};k.post(`${d._T}web3login`,o,{timeout:1e4}).then((async e=>{if(1==e.data.statu&&e.data.message.indexOf("success")>0)if(e.data.result){const n=Date.now();u.Z.set("token",e.data.result.s),u.Z.set("tokenTime",n),u.Z.set("isLogin",!0),u.Z.set("role",e.data.result.r),$(!1),z({isOpen:!0,msg:"Sign in successful",nonce:parseInt(1e4*Math.random())}),C("/nfttools/followmint")}else $(!1),alert(e.data.message)})).catch((e=>{$(!1),alert("Connection problem!")}))}catch(s){$(!1),z({isOpen:!0,msg:"Sign failed",nonce:parseInt(1e4*Math.random())})}},loading:I,sx:{mt:1,mr:1},children:(0,y.jsx)("span",{children:u.Z.get("isLogin")?t("user.signOut"):t("user.signIn")})}),(0,y.jsx)(p.Z,{disabled:!1,onClick:()=>{T((e=>e-1))},sx:{mt:1,mr:1,color:"#999"},children:"Back"})]})})]})]},v[1].label)]}),(0,y.jsx)(x.Z,{xs:12,style:{display:_.isOpen?" ":"none"},children:(0,y.jsx)(b.Z,{msg:_.msg,nonce:_.nonce})},_.msg)]})}var S=t(32415);(0,t(42379).ZP)(S.Z)((e=>{let{theme:n}=e;return{backgroundColor:"dark"===n.palette.mode?"#1A2027":"#fff",...n.typography.body2,padding:n.spacing(1),textAlign:"center",color:n.palette.text.secondary}}));var w=function(){return(0,y.jsx)(s.Z,{title:"User Center",children:(0,y.jsx)(C,{})})};var O=function(){return(0,y.jsx)(w,{})}}}]);